/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the groovy Plugin to add support for Groovy.
    id 'groovy'

    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
    alias(libs.plugins.shadow)
}
apply plugin: 'com.github.johnrengelman.shadow'

archivesBaseName = 'how'
distributions {
    main {
        distributionBaseName = 'how'
    }
    shadow {
        distributionBaseName = 'how'
    }
}
repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}


application {
    // Define the main class for the application.
    mainClass = 'us.schueler.howto.app.App'
    applicationName = 'how'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    implementation project(':utilities')
    implementation project(':npm-detector')
    implementation project(':gradle-detector')

    implementation libs.picocli
    annotationProcessor libs.picocliCodegen
    compileOnly libs.lombok
    annotationProcessor libs.lombok


    testImplementation libs.bundles.test
}

//force distZip/distTar artifacts to be overwritten by shadow versions
shadowDistZip.mustRunAfter distZip
shadowDistTar.mustRunAfter distTar
tasks.named('test') {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
}
